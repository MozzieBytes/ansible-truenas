# Notes on hacking this collection

## Documentation

`antsibull-docs` is used to create and populate the `docs` directory:

    antsibull-docs sphinx-init --use-current --dest-dir new-docs arensb.truenas

This creates the `docs/build.sh` script, which is used to generate
documentation: it uses `antsibull-docs collection` to convert Python
module files into RST files in `docs/`, and then `sphinx-build` to
convert those RST files into HTML.

The files generated by `sphinx-build` go in `docs/build/`. That
directory can safely be deleted. In fact, if you make major changes
(including deleting modules), it's probably a good idea to delete
`docs/build/` and rebuild the documentation.

The generated HTML files can then be copied to `docs-site/`, which is
just a git repository of the
[documentation website](https://arensb.github.io/truenas/collections/arensb/truenas/index.html).
So to update the online documentation:

1. `make update-doc-site`
2. `cd docs-site`
3. `git add .; git checkin -m "Documentation update"; git push`
